<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>EXIS ìš´ë™ ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                    Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 20px;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                overflow: hidden;
            }

            .header {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 30px;
                text-align: center;
            }

            .header h1 {
                font-size: 2.5em;
                margin-bottom: 10px;
            }

            .header p {
                font-size: 1.1em;
                opacity: 0.9;
            }

            .content {
                padding: 40px;
            }

            /* ì„¤ë¬¸ ìŠ¤íƒ€ì¼ */
            .survey-section {
                display: none;
            }

            .survey-section.active {
                display: block;
            }

            .question {
                margin-bottom: 30px;
            }

            .question h3 {
                color: #333;
                margin-bottom: 15px;
                font-size: 1.3em;
            }

            .question label {
                display: block;
                padding: 15px;
                background: #f8f9fa;
                border: 2px solid #e9ecef;
                border-radius: 10px;
                margin-bottom: 10px;
                cursor: pointer;
                transition: all 0.3s;
            }

            .question label:hover {
                background: #e9ecef;
                border-color: #667eea;
            }

            .question input[type="radio"]:checked + label,
            .question input[type="checkbox"]:checked + label {
                background: #667eea;
                color: white;
                border-color: #667eea;
            }

            .question input[type="radio"],
            .question input[type="checkbox"] {
                display: none;
            }

            .question input[type="number"],
            .question input[type="text"] {
                width: 100%;
                padding: 12px;
                border: 2px solid #e9ecef;
                border-radius: 10px;
                font-size: 1em;
                margin-bottom: 10px;
            }

            .input-group {
                display: flex;
                gap: 15px;
                margin-bottom: 10px;
            }

            .input-group input {
                flex: 1;
            }

            .btn {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                padding: 15px 40px;
                border-radius: 10px;
                font-size: 1.1em;
                cursor: pointer;
                transition: transform 0.3s;
                margin-top: 20px;
            }

            .btn:hover {
                transform: translateY(-2px);
            }

            .btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            /* ê²°ê³¼ ìŠ¤íƒ€ì¼ */
            .results-section {
                display: none;
            }

            .results-section.active {
                display: block;
            }

            .progress-bar-container {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 20px;
            }

            .progress-info {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
            }

            .day-progress {
                font-size: 1.5em;
                font-weight: bold;
                color: #667eea;
            }

            .week-info {
                color: #666;
                font-size: 1.1em;
            }

            .progress-bar {
                height: 30px;
                background: #e9ecef;
                border-radius: 15px;
                overflow: hidden;
                position: relative;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
                transition: width 0.5s;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
            }

            .user-profile {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 20px;
            }

            .user-profile h3 {
                color: #667eea;
                margin-bottom: 15px;
            }

            .profile-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }

            .profile-item {
                background: white;
                padding: 15px;
                border-radius: 8px;
            }

            .profile-item strong {
                display: block;
                color: #666;
                font-size: 0.9em;
                margin-bottom: 5px;
            }

            .profile-item span {
                font-size: 1.2em;
                color: #333;
            }

            .exp-bars {
                margin: 20px 0;
            }

            .exp-bar {
                margin-bottom: 15px;
            }

            .exp-label {
                display: flex;
                justify-content: space-between;
                margin-bottom: 5px;
                font-size: 0.9em;
            }

            .exp-progress {
                height: 20px;
                background: #e9ecef;
                border-radius: 10px;
                overflow: hidden;
                position: relative;
            }

            .exp-fill {
                height: 100%;
                background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
                transition: width 0.5s;
            }

            .exp-change {
                display: inline-block;
                margin-left: 10px;
                font-weight: bold;
                animation: fadeIn 0.5s;
            }

            .exp-change.positive {
                color: #28a745;
            }

            .exp-change.negative {
                color: #dc3545;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* í•˜ë£¨ ìš´ë™ ì¹´ë“œ */
            .day-workout-card {
                background: #f8f9fa;
                border-radius: 15px;
                padding: 30px;
                margin-bottom: 20px;
            }

            .day-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                padding-bottom: 15px;
                border-bottom: 3px solid #667eea;
            }

            .day-title {
                font-size: 1.8em;
                font-weight: bold;
                color: #333;
            }

            .day-type {
                background: #667eea;
                color: white;
                padding: 8px 20px;
                border-radius: 20px;
                font-size: 1em;
            }

            .rest-day {
                background: #28a745;
            }

            .deload-day {
                background: #ffc107;
            }

            .rest-message {
                text-align: center;
                padding: 40px;
                font-size: 1.2em;
                color: #666;
            }

            .rest-message-icon {
                font-size: 3em;
                margin-bottom: 20px;
            }

            .exercise-list {
                list-style: none;
            }

            .exercise-item {
                background: white;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 15px;
                border-left: 5px solid #667eea;
            }

            .exercise-name {
                font-weight: bold;
                font-size: 1.2em;
                color: #333;
                margin-bottom: 8px;
            }

            .exercise-details {
                color: #666;
                font-size: 1em;
                margin-bottom: 8px;
            }

            .exercise-tags {
                margin-bottom: 15px;
            }

            .tag {
                display: inline-block;
                background: #e9ecef;
                padding: 4px 10px;
                border-radius: 5px;
                font-size: 0.85em;
                margin-right: 8px;
                color: #666;
            }

            .feedback-section {
                margin-top: 15px;
                padding: 15px;
                background: #fff3cd;
                border-radius: 8px;
            }

            .feedback-title {
                font-size: 0.95em;
                color: #856404;
                margin-bottom: 10px;
                font-weight: bold;
            }

            .feedback-buttons {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .feedback-btn {
                padding: 12px;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-size: 0.95em;
                font-weight: bold;
                transition: transform 0.2s;
            }

            .feedback-btn:hover {
                transform: scale(1.05);
            }

            .feedback-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .feedback-easy {
                background: #28a745;
                color: white;
            }

            .feedback-good {
                background: #17a2b8;
                color: white;
            }

            .feedback-hard {
                background: #ffc107;
            }

            .feedback-impossible {
                background: #dc3545;
                color: white;
            }

            .feedback-result {
                margin-top: 15px;
                padding: 15px;
                background: #d4edda;
                border-radius: 8px;
                border-left: 4px solid #28a745;
            }

            .next-day-btn {
                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                color: white;
                border: none;
                padding: 15px 40px;
                border-radius: 10px;
                font-size: 1.2em;
                cursor: pointer;
                width: 100%;
                margin-top: 20px;
                font-weight: bold;
                transition: transform 0.3s;
            }

            .next-day-btn:hover:not(:disabled) {
                transform: translateY(-2px);
            }

            .next-day-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .reset-btn {
                background: #dc3545;
                color: white;
                border: none;
                padding: 12px 30px;
                border-radius: 8px;
                cursor: pointer;
                margin-top: 20px;
                font-size: 1em;
            }

            .completion-card {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 40px;
                border-radius: 15px;
                text-align: center;
            }

            .completion-card h2 {
                font-size: 2.5em;
                margin-bottom: 20px;
            }

            .completion-card p {
                font-size: 1.2em;
                line-height: 1.6;
            }

            .exp-changes-summary {
                background: white;
                color: #333;
                padding: 20px;
                border-radius: 10px;
                margin-top: 20px;
            }

            .exp-changes-summary h3 {
                color: #667eea;
                margin-bottom: 15px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸ‹ï¸ EXIS ìš´ë™ ì•Œê³ ë¦¬ì¦˜ í…ŒìŠ¤íŠ¸</h1>
                <p>í•˜ë£¨ ë‹¨ìœ„ ì§„í–‰ ë° ê²½í—˜ì¹˜ ë³€í™” í™•ì¸</p>
            </div>

            <div class="content">
                <!-- ì´ˆê¸° ì„¤ë¬¸ ì„¹ì…˜ -->
                <div class="survey-section active" id="surveySection">
                    <h2 style="margin-bottom: 30px">ì´ˆê¸° ì„¤ë¬¸</h2>

                    <!-- ì§ˆë¬¸ 1: ìš´ë™ ê²½ë ¥ -->
                    <div class="question">
                        <h3>1. í—¬ìŠ¤ë¥¼ ì‹œì‘í•œ ì§€ ì–¼ë§ˆë‚˜ ë˜ì—ˆë‚˜ìš”?</h3>
                        <input
                            type="radio"
                            name="experience"
                            id="exp1"
                            value="ì´ˆê¸‰"
                        />
                        <label for="exp1">ğŸŒ± ì´ˆê¸‰ (6ê°œì›” ë¯¸ë§Œ)</label>

                        <input
                            type="radio"
                            name="experience"
                            id="exp2"
                            value="ì¤‘ê¸‰"
                        />
                        <label for="exp2">ğŸ’ª ì¤‘ê¸‰ (6ê°œì›” ~ 2ë…„)</label>

                        <input
                            type="radio"
                            name="experience"
                            id="exp3"
                            value="ìƒê¸‰"
                        />
                        <label for="exp3">ğŸ”¥ ìƒê¸‰ (2ë…„ ì´ìƒ)</label>
                    </div>

                    <!-- ì§ˆë¬¸ 2: ì£¼ìš” ë¦¬í”„íŠ¸ ì¤‘ëŸ‰ -->
                    <div class="question">
                        <h3>
                            2. ì£¼ìš” ë¦¬í”„íŠ¸ ìµœëŒ€ ì¤‘ëŸ‰ì„ ì•Œë ¤ì£¼ì„¸ìš” (ì„ íƒì‚¬í•­, kg)
                        </h3>
                        <div class="input-group">
                            <input
                                type="number"
                                id="squat"
                                placeholder="ìŠ¤ì¿¼íŠ¸"
                                min="0"
                            />
                            <input
                                type="number"
                                id="bench"
                                placeholder="ë²¤ì¹˜í”„ë ˆìŠ¤"
                                min="0"
                            />
                            <input
                                type="number"
                                id="deadlift"
                                placeholder="ë°ë“œë¦¬í”„íŠ¸"
                                min="0"
                            />
                        </div>
                    </div>

                    <!-- ì§ˆë¬¸ 3: ì²´í˜• ì •ë³´ -->
                    <div class="question">
                        <h3>3. ì²´í˜• ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš” (ì„ íƒì‚¬í•­)</h3>
                        <div class="input-group">
                            <input
                                type="number"
                                id="height"
                                placeholder="í‚¤ (cm)"
                                min="100"
                                max="250"
                            />
                            <input
                                type="number"
                                id="weight"
                                placeholder="ì²´ì¤‘ (kg)"
                                min="30"
                                max="200"
                            />
                        </div>
                    </div>

                    <!-- ì§ˆë¬¸ 4: ì£¼ê°„ ìš´ë™ ë¹ˆë„ -->
                    <div class="question">
                        <h3>4. ì¼ì£¼ì¼ì— í‰ê·  ëª‡ ë²ˆ ìš´ë™í•˜ì‹œë‚˜ìš”?</h3>
                        <input
                            type="radio"
                            name="frequency"
                            id="freq1"
                            value="3"
                        />
                        <label for="freq1">ì£¼ 3íšŒ</label>

                        <input
                            type="radio"
                            name="frequency"
                            id="freq2"
                            value="4"
                        />
                        <label for="freq2">ì£¼ 4íšŒ</label>

                        <input
                            type="radio"
                            name="frequency"
                            id="freq3"
                            value="5"
                        />
                        <label for="freq3">ì£¼ 5íšŒ</label>

                        <input
                            type="radio"
                            name="frequency"
                            id="freq4"
                            value="6"
                        />
                        <label for="freq4">ì£¼ 6íšŒ</label>
                    </div>

                    <!-- ì§ˆë¬¸ 5: ìš´ë™ í™˜ê²½ -->
                    <div class="question">
                        <h3>5. ì–´ë–¤ í™˜ê²½ì—ì„œ ìš´ë™í•˜ê³  ê³„ì‹ ê°€ìš”?</h3>
                        <input
                            type="radio"
                            name="environment"
                            id="env1"
                            value="ë§¨ëª¸"
                        />
                        <label for="env1">ğŸ¤¸ ë§¨ëª¸ ìš´ë™</label>

                        <input
                            type="radio"
                            name="environment"
                            id="env2"
                            value="í—¬ìŠ¤ì¥"
                        />
                        <label for="env2">ğŸ‹ï¸ í—¬ìŠ¤ì¥</label>

                        <input
                            type="radio"
                            name="environment"
                            id="env3"
                            value="ì†Œë„êµ¬"
                        />
                        <label for="env3"
                            >ğŸ¯ ë§¨ëª¸ + ì†Œë„êµ¬ (ë°´ë“œ, ë¤ë²¨ ë“±)</label
                        >
                    </div>

                    <!-- ì§ˆë¬¸ 6: ìš´ë™ ëª©ì  -->
                    <div class="question">
                        <h3>6. ìš´ë™ ëª©í‘œëŠ” ë¬´ì—‡ì¸ê°€ìš”?</h3>
                        <input
                            type="radio"
                            name="goal"
                            id="goal1"
                            value="ë‹¤ì´ì–´íŠ¸"
                        />
                        <label for="goal1">ğŸ”¥ ë‹¤ì´ì–´íŠ¸ (ì²´ì§€ë°© ê°ì†Œ)</label>

                        <input
                            type="radio"
                            name="goal"
                            id="goal2"
                            value="ê·¼ìœ¡ì¦ê°€"
                        />
                        <label for="goal2">ğŸ’ª ê·¼ìœ¡ ì¦ê°€ (ë²Œí¬ì—…)</label>

                        <input
                            type="radio"
                            name="goal"
                            id="goal3"
                            value="ìˆ˜í–‰ë ¥"
                        />
                        <label for="goal3">âš¡ ìˆ˜í–‰ë ¥ í–¥ìƒ (ì²´ë ¥, ê·¼ë ¥)</label>
                    </div>

                    <!-- ì§ˆë¬¸ 7: ì§‘ì¤‘ ë¶€ìœ„ -->
                    <div class="question">
                        <h3>
                            7. íŠ¹ë³„íˆ ì‹ ê²½ ì“°ê³  ì‹¶ì€ ë¶€ìœ„ê°€ ìˆë‚˜ìš”? (ë³µìˆ˜ ì„ íƒ
                            ê°€ëŠ¥)
                        </h3>
                        <input
                            type="checkbox"
                            name="focus"
                            id="focus1"
                            value="ê°€ìŠ´"
                        />
                        <label for="focus1">ê°€ìŠ´</label>

                        <input
                            type="checkbox"
                            name="focus"
                            id="focus2"
                            value="ë“±"
                        />
                        <label for="focus2">ë“±</label>

                        <input
                            type="checkbox"
                            name="focus"
                            id="focus3"
                            value="ì–´ê¹¨"
                        />
                        <label for="focus3">ì–´ê¹¨</label>

                        <input
                            type="checkbox"
                            name="focus"
                            id="focus4"
                            value="íŒ”"
                        />
                        <label for="focus4">íŒ”</label>

                        <input
                            type="checkbox"
                            name="focus"
                            id="focus5"
                            value="ë³µë¶€"
                        />
                        <label for="focus5">ë³µë¶€</label>

                        <input
                            type="checkbox"
                            name="focus"
                            id="focus6"
                            value="í•˜ì²´"
                        />
                        <label for="focus6">í•˜ì²´</label>

                        <input
                            type="checkbox"
                            name="focus"
                            id="focus7"
                            value="ì—†ìŒ"
                        />
                        <label for="focus7">ê³¨ê³ ë£¨ ìš´ë™í•˜ê³  ì‹¶ì–´ìš”</label>
                    </div>

                    <button class="btn" onclick="startProgram()">
                        í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°
                    </button>
                </div>

                <!-- ê²°ê³¼ ì„¹ì…˜ -->
                <div class="results-section" id="resultsSection">
                    <div class="progress-bar-container">
                        <div class="progress-info">
                            <div class="day-progress" id="dayProgress">
                                Day 1 / 28
                            </div>
                            <div class="week-info" id="weekInfo">1ì£¼ì°¨</div>
                        </div>
                        <div class="progress-bar">
                            <div
                                class="progress-fill"
                                id="progressFill"
                                style="width: 0%"
                            >
                                0%
                            </div>
                        </div>
                    </div>

                    <div class="user-profile" id="userProfile"></div>

                    <div id="dayWorkoutContainer"></div>

                    <button class="reset-btn" onclick="resetProgram()">
                        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            </div>
        </div>

        <script>
            // ìš´ë™ ë°ì´í„°ë² ì´ìŠ¤
            const exerciseDatabase = [
                {
                    name: "í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ì–´ê¹¨", "íŒ”", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë² ì–´ í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ì–´ê¹¨", "íŒ”", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰"],
                },
                {
                    name: "ë‹ë§ í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ì–´ê¹¨", "íŒ”", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰"],
                },
                {
                    name: "íŒŒì´í¬ í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ë“±", "íŒ”", "ì½”ì–´"],
                    levels: ["ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "í‘¸ì‰¬ì—… ë¡œìš°",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ë“±", "íŒ”", "ì½”ì–´"],
                    levels: ["ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë‹ë§ í‘¸ì‰¬ì—… ë¡œìš°",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ë“±", "íŒ”", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰"],
                },
                {
                    name: "ë””í´ë¼ì¸ í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ì–´ê¹¨", "íŒ”", "ì½”ì–´"],
                    levels: ["ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë‹ë§ ë””í´ë¼ì¸ í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ì–´ê¹¨", "íŒ”", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ì•„ì²˜ í‘¸ì‰¬ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ê°€ìŠ´", "ì–´ê¹¨", "íŒ”", "ì½”ì–´"],
                    levels: ["ìƒê¸‰"],
                },
                {
                    name: "í”Œë­í¬",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë‹ë§ í”Œë­í¬",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰"],
                },
                {
                    name: "ì‚¬ì´ë“œ í”Œë­í¬",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë² ì´ë¹„ í”Œë­í¬",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë² ì–´ í”Œë­í¬",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ì‹¯ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë ˆê·¸ ë ˆì´ì¦ˆ",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "í¬ëŸ°ì¹˜",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "V-ì—…",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´", "ë³µë¶€"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë°ë“œë²„ê·¸",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["ì½”ì–´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ìŠ¤ì¿¼íŠ¸",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬", "í—¬ìŠ¤ì¥"],
                    bodyParts: ["í•˜ì²´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ì˜¤ë²„í—¤ë“œ ìŠ¤ì¿¼íŠ¸",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬", "í—¬ìŠ¤ì¥"],
                    bodyParts: ["í•˜ì²´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ìŠ¤í”Œë¦¿ ìŠ¤ì¿¼íŠ¸",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬", "í—¬ìŠ¤ì¥"],
                    bodyParts: ["í•˜ì²´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "í”¼ìŠ¤í†¨ ìŠ¤ì¿¼íŠ¸",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬"],
                    bodyParts: ["í•˜ì²´", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ëŸ°ì§€ íŠ¸ìœ„ìŠ¤íŠ¸",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬", "í—¬ìŠ¤ì¥"],
                    bodyParts: ["í•˜ì²´", "ì½”ì–´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ëŸ°ì§€",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬", "í—¬ìŠ¤ì¥"],
                    bodyParts: ["í•˜ì²´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
                {
                    name: "ë¦¬ì–´ ëŸ°ì§€",
                    environment: ["ë§¨ëª¸", "ì†Œë„êµ¬", "í—¬ìŠ¤ì¥"],
                    bodyParts: ["í•˜ì²´"],
                    levels: ["ì´ˆê¸‰", "ì¤‘ê¸‰", "ìƒê¸‰"],
                },
            ];

            // ì‚¬ìš©ì ë°ì´í„° ë° ê²½í—˜ì¹˜
            let userData = {
                experience: "",
                lifts: { squat: 0, bench: 0, deadlift: 0 },
                body: { height: 0, weight: 0 },
                frequency: 0,
                environment: "",
                goal: "",
                focusAreas: [],
                bodyPartExp: {
                    ê°€ìŠ´: 50,
                    ë“±: 50,
                    ì–´ê¹¨: 50,
                    íŒ”: 50,
                    ë³µë¶€: 50,
                    í•˜ì²´: 50,
                    ì½”ì–´: 50,
                },
            };

            let currentDay = 1;
            let currentWeek = 1;
            let currentDayData = null;
            let feedbackGiven = false;
            let expChanges = {};
            let recentBodyParts = []; // ìµœê·¼ ìš´ë™í•œ ë¶€ìœ„ íŠ¸ë˜í‚¹ (ìµœê·¼ 3ì¼)

            // ì„¤ë¬¸ ë°ì´í„° ìˆ˜ì§‘ ë° í”„ë¡œê·¸ë¨ ì‹œì‘
            function startProgram() {
                // í•„ìˆ˜ ì§ˆë¬¸ ì²´í¬
                const experience = document.querySelector(
                    'input[name="experience"]:checked'
                );
                const frequency = document.querySelector(
                    'input[name="frequency"]:checked'
                );
                const environment = document.querySelector(
                    'input[name="environment"]:checked'
                );
                const goal = document.querySelector(
                    'input[name="goal"]:checked'
                );

                if (!experience || !frequency || !environment || !goal) {
                    alert("í•„ìˆ˜ ì§ˆë¬¸ì— ëª¨ë‘ ë‹µë³€í•´ì£¼ì„¸ìš”!");
                    return;
                }

                // ë°ì´í„° ìˆ˜ì§‘
                userData.experience = experience.value;
                userData.frequency = parseInt(frequency.value);
                userData.environment = environment.value;
                userData.goal = goal.value;

                // ì„ íƒ ë°ì´í„°
                userData.lifts.squat =
                    parseInt(document.getElementById("squat").value) || 0;
                userData.lifts.bench =
                    parseInt(document.getElementById("bench").value) || 0;
                userData.lifts.deadlift =
                    parseInt(document.getElementById("deadlift").value) || 0;
                userData.body.height =
                    parseInt(document.getElementById("height").value) || 0;
                userData.body.weight =
                    parseInt(document.getElementById("weight").value) || 0;

                // ì§‘ì¤‘ ë¶€ìœ„
                const focusCheckboxes = document.querySelectorAll(
                    'input[name="focus"]:checked'
                );
                userData.focusAreas = Array.from(focusCheckboxes).map(
                    (cb) => cb.value
                );

                // ì´ˆê¸° ê²½í—˜ì¹˜ ì„¤ì •
                setInitialExperience();

                // UI ì „í™˜
                document
                    .getElementById("surveySection")
                    .classList.remove("active");
                document
                    .getElementById("resultsSection")
                    .classList.add("active");

                // ì‚¬ìš©ì í”„ë¡œí•„ í‘œì‹œ
                displayUserProfile();

                // ì²« ë‚  í‘œì‹œ
                showDay(1);
            }

            // ì´ˆê¸° ê²½í—˜ì¹˜ ì„¤ì •
            function setInitialExperience() {
                let baseExp = 50;

                // ìš´ë™ ê²½ë ¥ì— ë”°ë¥¸ ê¸°ë³¸ ê²½í—˜ì¹˜
                if (userData.experience === "ì´ˆê¸‰") {
                    baseExp = 30;
                } else if (userData.experience === "ì¤‘ê¸‰") {
                    baseExp = 60;
                } else if (userData.experience === "ìƒê¸‰") {
                    baseExp = 85;
                }

                // ë¦¬í”„íŠ¸ ì¤‘ëŸ‰ ë°˜ì˜
                if (
                    userData.lifts.squat > 0 ||
                    userData.lifts.bench > 0 ||
                    userData.lifts.deadlift > 0
                ) {
                    const avgLift =
                        (userData.lifts.squat +
                            userData.lifts.bench +
                            userData.lifts.deadlift) /
                        3;
                    if (userData.body.weight > 0) {
                        const ratio = avgLift / userData.body.weight;
                        if (ratio > 1.5) baseExp = Math.min(baseExp + 15, 95);
                        else if (ratio > 1.0)
                            baseExp = Math.min(baseExp + 10, 90);
                    }
                }

                // ìš´ë™ ë¹ˆë„ ë°˜ì˜
                if (userData.frequency >= 5) {
                    baseExp = Math.min(baseExp + 5, 95);
                }

                // ëª¨ë“  ë¶€ìœ„ì— ê¸°ë³¸ ê²½í—˜ì¹˜ ì ìš©
                for (let part in userData.bodyPartExp) {
                    userData.bodyPartExp[part] = baseExp;
                }

                // ì§‘ì¤‘ ë¶€ìœ„ëŠ” ì•½ê°„ ë‚®ê²Œ ì‹œì‘
                if (
                    !userData.focusAreas.includes("ì—†ìŒ") &&
                    userData.focusAreas.length > 0
                ) {
                    userData.focusAreas.forEach((area) => {
                        if (userData.bodyPartExp[area]) {
                            userData.bodyPartExp[area] = Math.max(
                                baseExp - 10,
                                20
                            );
                        }
                    });
                }
            }

            // ë‹¤ìŒ ìš´ë™ ë¶€ìœ„ ì„ íƒ (ì‹¤ì‹œê°„ ê²½í—˜ì¹˜ ë°˜ì˜)
            function selectNextBodyPart() {
                const allBodyParts = [
                    "ê°€ìŠ´",
                    "ë“±",
                    "ì–´ê¹¨",
                    "íŒ”",
                    "ë³µë¶€",
                    "í•˜ì²´",
                ];

                // ìµœê·¼ 2ì¼ ì´ë‚´ì— ìš´ë™í•œ ë¶€ìœ„ ì œì™¸
                const recentParts = recentBodyParts.slice(-2);

                // ì‚¬ìš© ê°€ëŠ¥í•œ ë¶€ìœ„ í•„í„°ë§ (ìµœê·¼ ìš´ë™í•˜ì§€ ì•Šì€ ë¶€ìœ„)
                let availableParts = allBodyParts.filter(
                    (part) => !recentParts.includes(part)
                );

                // ëª¨ë“  ë¶€ìœ„ë¥¼ ìµœê·¼ì— í–ˆë‹¤ë©´ ì „ì²´ì—ì„œ ì„ íƒ
                if (availableParts.length === 0) {
                    availableParts = [...allBodyParts];
                }

                let selectedPart;

                // ê²½í—˜ì¹˜ ê¸°ë°˜ ê°€ì¤‘ì¹˜ í™•ë¥  ëª¨ë¸
                if (
                    userData.focusAreas.length > 0 &&
                    !userData.focusAreas.includes("ì—†ìŒ")
                ) {
                    // ì§‘ì¤‘ ë¶€ìœ„ ì¤‘ì—ì„œ ê²½í—˜ì¹˜ê°€ ë‚®ì€ ë¶€ìœ„ ìš°ì„ 
                    const focusAvailable = availableParts.filter((part) =>
                        userData.focusAreas.includes(part)
                    );

                    if (focusAvailable.length > 0 && Math.random() < 0.65) {
                        // 65% í™•ë¥ ë¡œ ì§‘ì¤‘ ë¶€ìœ„
                        // ê²½í—˜ì¹˜ê°€ ë‚®ì€ ë¶€ìœ„ì¼ìˆ˜ë¡ ë†’ì€ í™•ë¥ 
                        selectedPart = selectByExpWeight(focusAvailable, true);
                    } else {
                        // 35% í™•ë¥ ë¡œ ì¼ë°˜ ë¶€ìœ„
                        selectedPart = selectByExpWeight(availableParts, false);
                    }
                } else {
                    // ì§‘ì¤‘ ë¶€ìœ„ ì—†ìœ¼ë©´ ê³¨ê³ ë£¨
                    selectedPart = selectByExpWeight(availableParts, false);
                }

                // í•˜ì²´ëŠ” ì¼ì£¼ì¼ì— ìµœì†Œ 1íšŒ ë³´ì¥
                const currentWeekStart = Math.floor((currentDay - 1) / 7) * 7;
                const currentWeekParts = recentBodyParts.slice(
                    Math.max(
                        0,
                        recentBodyParts.length - (currentDay - currentWeekStart)
                    )
                );

                if (
                    currentDay % 7 === 6 && // ì£¼ì˜ ë§ˆì§€ë§‰ì—ì„œ 2ë²ˆì§¸ ë‚ 
                    !currentWeekParts.includes("í•˜ì²´") &&
                    availableParts.includes("í•˜ì²´")
                ) {
                    selectedPart = "í•˜ì²´";
                }

                return selectedPart;
            }

            // ê²½í—˜ì¹˜ ê°€ì¤‘ì¹˜ ê¸°ë°˜ ë¶€ìœ„ ì„ íƒ
            function selectByExpWeight(parts, preferLowExp) {
                if (parts.length === 0) return null;
                if (parts.length === 1) return parts[0];

                // ê° ë¶€ìœ„ì˜ ê²½í—˜ì¹˜ ìˆ˜ì§‘
                const weights = parts.map((part) => {
                    const exp = userData.bodyPartExp[part] || 50;
                    // ê²½í—˜ì¹˜ê°€ ë‚®ì„ìˆ˜ë¡ ë†’ì€ ê°€ì¤‘ì¹˜ (ì§‘ì¤‘ í›ˆë ¨ í•„ìš”)
                    if (preferLowExp) {
                        return 100 - exp + 10; // ìµœì†Œ ê°€ì¤‘ì¹˜ 10
                    } else {
                        return 60; // ê· ë“± ë¶„ë°°
                    }
                });

                // ê°€ì¤‘ì¹˜ ê¸°ë°˜ ëœë¤ ì„ íƒ
                const totalWeight = weights.reduce((a, b) => a + b, 0);
                let random = Math.random() * totalWeight;

                for (let i = 0; i < parts.length; i++) {
                    random -= weights[i];
                    if (random <= 0) {
                        return parts[i];
                    }
                }

                return parts[parts.length - 1];
            }

            // ìš´ë™ì¼ì¸ì§€ íœ´ì‹ì¼ì¸ì§€ ê²°ì •
            function isWorkoutDay() {
                const currentWeekStart =
                    Math.floor((currentDay - 1) / 7) * 7 + 1;
                const dayInWeek = currentDay - currentWeekStart + 1;

                // ì´ë²ˆ ì£¼ì— ì´ë¯¸ í•œ ìš´ë™ íšŸìˆ˜ ê³„ì‚°
                const workoutsThisWeek = recentBodyParts.slice(
                    Math.max(0, recentBodyParts.length - (dayInWeek - 1))
                ).length;

                return workoutsThisWeek < userData.frequency;
            }

            // í•˜ë£¨ í‘œì‹œ
            function showDay(dayNumber) {
                currentDay = dayNumber;
                currentWeek = Math.ceil(dayNumber / 7);
                feedbackGiven = false;
                expChanges = {};

                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                updateProgress();

                // ìš´ë™ì¼ì¸ì§€ íœ´ì‹ì¼ì¸ì§€ ê²°ì •
                if (!isWorkoutDay()) {
                    displayRestDay();
                } else {
                    // ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ìŒ ë¶€ìœ„ ì„ íƒ (ê²½í—˜ì¹˜ ë°˜ì˜)
                    const selectedBodyPart = selectNextBodyPart();

                    // ìš´ë™ ìƒì„±
                    const exercises = generateDayExercises(
                        currentWeek,
                        selectedBodyPart
                    );

                    currentDayData = {
                        type: currentWeek === 4 ? "deload" : "workout",
                        bodyPart: selectedBodyPart,
                        exercises: exercises,
                    };

                    displayWorkoutDay();
                }

                // ê²½í—˜ì¹˜ ë°” ì—…ë°ì´íŠ¸
                updateExpBars();
            }

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            function updateProgress() {
                const progress = ((currentDay - 1) / 28) * 100;
                document.getElementById(
                    "dayProgress"
                ).textContent = `Day ${currentDay} / 28`;
                document.getElementById(
                    "weekInfo"
                ).textContent = `${currentWeek}ì£¼ì°¨${
                    currentWeek === 4 ? " (Deload Week)" : ""
                }`;
                document.getElementById("progressFill").style.width =
                    progress + "%";
                document.getElementById("progressFill").textContent =
                    Math.round(progress) + "%";
            }

            // íœ´ì‹ì¼ í‘œì‹œ
            function displayRestDay() {
                const container = document.getElementById(
                    "dayWorkoutContainer"
                );
                container.innerHTML = `
                <div class="day-workout-card">
                    <div class="day-header">
                        <div class="day-title">Day ${currentDay} - íœ´ì‹ì¼</div>
                        <div class="day-type rest-day">íœ´ì‹</div>
                    </div>
                    <div class="rest-message">
                        <div class="rest-message-icon">ğŸ˜´</div>
                        <p>ì˜¤ëŠ˜ì€ ëª¸ì„ íšŒë³µí•˜ëŠ” ë‚ ì…ë‹ˆë‹¤.</p>
                        <p>ì¶©ë¶„í•œ íœ´ì‹ê³¼ ì˜ì–‘ ì„­ì·¨ë¥¼ í•˜ì„¸ìš”!</p>
                    </div>
                </div>
                <button class="next-day-btn" onclick="goToNextDay()">
                    ${currentDay < 28 ? "ë‹¤ìŒ ë‚ ë¡œ ì´ë™ â†’" : "í”„ë¡œê·¸ë¨ ì™„ë£Œ!"}
                </button>
            `;
            }

            // ìš´ë™ì¼ í‘œì‹œ
            function displayWorkoutDay() {
                const container = document.getElementById(
                    "dayWorkoutContainer"
                );
                const typeLabel =
                    currentDayData.type === "deload" ? "íšŒë³µ ìš´ë™" : "ìš´ë™";
                const typeClass =
                    currentDayData.type === "deload" ? "deload-day" : "";

                let html = `
                <div class="day-workout-card">
                    <div class="day-header">
                        <div class="day-title">Day ${currentDay} - ${currentDayData.bodyPart} ì§‘ì¤‘</div>
                        <div class="day-type ${typeClass}">${typeLabel}</div>
                    </div>
                    <ul class="exercise-list">
            `;

                currentDayData.exercises.forEach((exercise, idx) => {
                    html += `
                    <li class="exercise-item">
                        <div class="exercise-name">${idx + 1}. ${
                        exercise.name
                    }</div>
                        <div class="exercise-details">${exercise.sets} ì„¸íŠ¸ Ã— ${
                        exercise.reps
                    } íšŒ</div>
                        <div class="exercise-tags">
                            ${exercise.bodyParts
                                .map(
                                    (part) => `<span class="tag">${part}</span>`
                                )
                                .join("")}
                        </div>
                        <div class="feedback-section">
                            <div class="feedback-title">ğŸ’¬ ì´ ìš´ë™ì˜ ë‚œì´ë„ëŠ” ì–´ë• ë‚˜ìš”?</div>
                            <div class="feedback-buttons">
                                <button class="feedback-btn feedback-easy" onclick="submitFeedback(${idx}, 'easy')">ë„ˆë¬´ ì‰¬ì›€ ğŸ˜Š</button>
                                <button class="feedback-btn feedback-good" onclick="submitFeedback(${idx}, 'good')">ì ì ˆí•¨ ğŸ‘</button>
                                <button class="feedback-btn feedback-hard" onclick="submitFeedback(${idx}, 'hard')">í˜ë“¦ ğŸ˜“</button>
                                <button class="feedback-btn feedback-impossible" onclick="submitFeedback(${idx}, 'impossible')">ë¶ˆê°€ëŠ¥ ğŸ˜°</button>
                            </div>
                            <div id="feedback-result-${idx}"></div>
                        </div>
                    </li>
                `;
                });

                html += `
                    </ul>
                </div>
                <button class="next-day-btn" id="nextDayBtn" onclick="goToNextDay()" disabled>
                    ${
                        currentDay < 28
                            ? "ëª¨ë“  ìš´ë™ì— í”¼ë“œë°±ì„ ì£¼ë©´ ë‹¤ìŒ ë‚ ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
                            : "í”„ë¡œê·¸ë¨ ì™„ë£Œ!"
                    }
                </button>
            `;

                container.innerHTML = html;
            }

            // í•˜ë£¨ ìš´ë™ ìƒì„± (ì‹¤ì‹œê°„ ê²½í—˜ì¹˜ ë°˜ì˜)
            function generateDayExercises(weekNumber, targetBodyPart) {
                if (!targetBodyPart) return [];

                const isDeload = weekNumber === 4;

                // ë¶€ìœ„ë³„ í˜„ì¬ ê²½í—˜ì¹˜ í™•ì¸
                const bodyPartExp = userData.bodyPartExp[targetBodyPart] || 50;

                // ì£¼ì°¨ë³„ ìš´ë™ ê°œìˆ˜ ì„¤ì •
                let numExercises;
                if (weekNumber === 1) {
                    numExercises = 3;
                } else if (weekNumber === 2 || weekNumber === 3) {
                    numExercises = 4;
                } else {
                    numExercises = 3; // Deload
                }

                // ê²½í—˜ì¹˜ ê¸°ë°˜ ë‚œì´ë„ ë ˆë²¨ ê²°ì •
                let targetLevels = [];
                if (bodyPartExp < 40) {
                    targetLevels = ["ì´ˆê¸‰"];
                } else if (bodyPartExp < 70) {
                    targetLevels = ["ì´ˆê¸‰", "ì¤‘ê¸‰"];
                } else {
                    targetLevels = ["ì¤‘ê¸‰", "ìƒê¸‰"];
                }

                // ìš´ë™ í•„í„°ë§ (ë¶€ìœ„, í™˜ê²½, ë ˆë²¨)
                const availableExercises = exerciseDatabase.filter(
                    (ex) =>
                        ex.bodyParts.some(
                            (part) =>
                                part === targetBodyPart ||
                                part === "ì½”ì–´" ||
                                (targetBodyPart.includes("ë³µ") &&
                                    part === "ë³µë¶€")
                        ) &&
                        ex.environment.includes(userData.environment) &&
                        ex.levels.some((level) => targetLevels.includes(level))
                );

                // ìš´ë™ì´ ì—†ìœ¼ë©´ ë ˆë²¨ ì œí•œ ì™„í™”
                if (availableExercises.length < numExercises) {
                    const fallbackExercises = exerciseDatabase.filter(
                        (ex) =>
                            ex.bodyParts.some(
                                (part) =>
                                    part === targetBodyPart ||
                                    part === "ì½”ì–´" ||
                                    (targetBodyPart.includes("ë³µ") &&
                                        part === "ë³µë¶€")
                            ) && ex.environment.includes(userData.environment)
                    );
                    availableExercises.push(...fallbackExercises);
                }

                const selectedExercises = [];
                const exercisesCopy = [...availableExercises];
                // ì¤‘ë³µ ì œê±°
                const uniqueExercises = exercisesCopy.filter(
                    (ex, idx, self) =>
                        idx === self.findIndex((e) => e.name === ex.name)
                );

                for (
                    let i = 0;
                    i < numExercises && uniqueExercises.length > 0;
                    i++
                ) {
                    const randomIndex = Math.floor(
                        Math.random() * uniqueExercises.length
                    );
                    const exercise = uniqueExercises[randomIndex];
                    uniqueExercises.splice(randomIndex, 1);

                    // ê²½í—˜ì¹˜ ë¹„ìœ¨ë¡œ ì„¸íŠ¸ ìˆ˜ì™€ ë°˜ë³µìˆ˜ ê³„ì‚°
                    const sets = calculateSets(weekNumber, bodyPartExp);
                    const reps = calculateReps(
                        weekNumber,
                        userData.goal,
                        isDeload,
                        bodyPartExp
                    );

                    selectedExercises.push({
                        name: exercise.name,
                        sets: sets,
                        reps: reps,
                        bodyParts: exercise.bodyParts,
                        feedbackGiven: false,
                    });
                }

                return selectedExercises;
            }

            // ì„¸íŠ¸ ìˆ˜ ê³„ì‚° (ê²½í—˜ì¹˜ ë¹„ìœ¨ ë°˜ì˜)
            function calculateSets(weekNumber, bodyPartExp) {
                let minSets, maxSets;

                // ì£¼ì°¨ë³„ ì„¸íŠ¸ ë²”ìœ„
                if (weekNumber === 1) {
                    minSets = 3;
                    maxSets = 4.5;
                } else if (weekNumber === 2 || weekNumber === 3) {
                    minSets = 3;
                    maxSets = 4.5;
                } else {
                    // Deload ì£¼ì°¨
                    minSets = 2.5;
                    maxSets = 4;
                }

                // ê²½í—˜ì¹˜ë¥¼ 0-100ì—ì„œ 0-1 ë¹„ìœ¨ë¡œ ë³€í™˜
                const expRatio = bodyPartExp / 100;

                // ê²½í—˜ì¹˜ ë¹„ìœ¨ë¡œ ì„¸íŠ¸ ìˆ˜ ê³„ì‚°
                const targetSets = Math.round(
                    minSets + (maxSets - minSets) * expRatio
                );

                return Math.max(targetSets, minSets);
            }

            // ë°˜ë³µ íšŸìˆ˜ ê³„ì‚° (ê²½í—˜ì¹˜ ë¹„ìœ¨ ë°˜ì˜)
            function calculateReps(weekNumber, goal, isDeload, bodyPartExp) {
                if (isDeload) {
                    return 10; // DeloadëŠ” ê³ ì •
                }

                let minReps, maxReps;

                // ëª©ì ì— ë”°ë¥¸ ìµœì†Œ/ìµœëŒ€ ë°˜ë³µìˆ˜ ì„¤ì •
                if (goal === "ë‹¤ì´ì–´íŠ¸") {
                    minReps = 15;
                    maxReps = 20;
                } else if (goal === "ê·¼ìœ¡ì¦ê°€") {
                    minReps = 6;
                    maxReps = 10;
                } else {
                    // ìˆ˜í–‰ë ¥
                    minReps = 8;
                    maxReps = 12;
                }

                // ê²½í—˜ì¹˜ë¥¼ 0-100ì—ì„œ 0-1 ë¹„ìœ¨ë¡œ ë³€í™˜
                const expRatio = bodyPartExp / 100;

                // ê²½í—˜ì¹˜ ë¹„ìœ¨ë¡œ minê³¼ max ì‚¬ì´ ê°’ ê³„ì‚°
                let targetReps = Math.round(
                    minReps + (maxReps - minReps) * expRatio
                );

                // ì£¼ì°¨ë³„ í”„ë¡œê·¸ë ˆì…˜ (+1~2íšŒ)
                if (weekNumber === 2) {
                    targetReps += 1;
                } else if (weekNumber === 3) {
                    targetReps += 2;
                }

                // ìµœì†Œê°’ ë³´ì¥
                return Math.max(targetReps, minReps);
            }

            // í”¼ë“œë°± ì œì¶œ
            function submitFeedback(exerciseIdx, feedbackType) {
                const exercise = currentDayData.exercises[exerciseIdx];

                if (exercise.feedbackGiven) {
                    return;
                }

                exercise.feedbackGiven = true;

                let message = "";
                let expChange = 0;

                if (feedbackType === "easy") {
                    message =
                        "âœ… ë‹¤ìŒì—ëŠ” ë” ì–´ë ¤ìš´ ë³€í˜•ì´ë‚˜ ë†’ì€ ê°•ë„ë¡œ ì¡°ì •ë©ë‹ˆë‹¤.";
                    expChange = 5;
                } else if (feedbackType === "good") {
                    message = "âœ… í˜„ì¬ ê°•ë„ê°€ ì ì ˆí•©ë‹ˆë‹¤. ê³„ì† ìœ ì§€ë©ë‹ˆë‹¤.";
                    expChange = 2;
                } else if (feedbackType === "hard") {
                    message =
                        "âœ… ì¡°ê¸ˆ í˜ë“¤ì—ˆë„¤ìš”. ê°•ë„ë¥¼ ì•½ê°„ ë‚®ì¶”ê±°ë‚˜ ë” ì—°ìŠµí•©ë‹ˆë‹¤.";
                    expChange = 1;
                } else if (feedbackType === "impossible") {
                    message =
                        "âœ… ì•„ì§ ì–´ë ¤ìš´ ìš´ë™ì´ë„¤ìš”. ë” ì‰¬ìš´ ë³€í˜•ìœ¼ë¡œ ì¡°ì •ë©ë‹ˆë‹¤.";
                    expChange = -3;
                }

                // ê²½í—˜ì¹˜ ë³€í™” ì €ì¥
                exercise.bodyParts.forEach((part) => {
                    if (userData.bodyPartExp[part] !== undefined) {
                        const oldExp = userData.bodyPartExp[part];
                        const newExp = Math.max(
                            0,
                            Math.min(100, oldExp + expChange)
                        );
                        userData.bodyPartExp[part] = newExp;

                        if (!expChanges[part]) expChanges[part] = 0;
                        expChanges[part] += expChange;
                    }
                });

                // í”¼ë“œë°± ê²°ê³¼ í‘œì‹œ
                const resultDiv = document.getElementById(
                    `feedback-result-${exerciseIdx}`
                );
                let expText = expChange > 0 ? `+${expChange}` : `${expChange}`;
                let expClass = expChange >= 0 ? "positive" : "negative";

                resultDiv.innerHTML = `
                <div class="feedback-result">
                    ${message}<br>
                    <strong>ê²½í—˜ì¹˜ ë³€í™”: <span class="exp-change ${expClass}">${expText}</span></strong>
                    (${exercise.bodyParts.join(", ")} ë¶€ìœ„)
                </div>
            `;

                // ëª¨ë“  ìš´ë™ í”¼ë“œë°± ë²„íŠ¼ ë¹„í™œì„±í™”
                const buttons =
                    resultDiv.previousElementSibling.querySelectorAll(
                        ".feedback-btn"
                    );
                buttons.forEach((btn) => (btn.disabled = true));

                // ê²½í—˜ì¹˜ ë°” ì—…ë°ì´íŠ¸ (í”„ë¡œí•„ë„ í•¨ê»˜ ì—…ë°ì´íŠ¸)
                displayUserProfile();

                // ëª¨ë“  ìš´ë™ì— í”¼ë“œë°±ì„ ì£¼ì—ˆëŠ”ì§€ í™•ì¸
                checkAllFeedbackGiven();
            }

            // ëª¨ë“  í”¼ë“œë°± í™•ì¸
            function checkAllFeedbackGiven() {
                const allGiven = currentDayData.exercises.every(
                    (ex) => ex.feedbackGiven
                );

                if (allGiven) {
                    const nextBtn = document.getElementById("nextDayBtn");
                    nextBtn.disabled = false;
                    nextBtn.textContent =
                        currentDay < 28
                            ? "ë‹¤ìŒ ë‚ ë¡œ ì´ë™ â†’"
                            : "í”„ë¡œê·¸ë¨ ì™„ë£Œ í™•ì¸!";
                }
            }

            // ë‹¤ìŒ ë‚ ë¡œ ì´ë™
            function goToNextDay() {
                // ìš´ë™í•œ ë¶€ìœ„ë¥¼ íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
                if (currentDayData && currentDayData.bodyPart) {
                    recentBodyParts.push(currentDayData.bodyPart);

                    // ìµœê·¼ 7ì¼ì¹˜ë§Œ ìœ ì§€ (1ì£¼ì¼)
                    if (recentBodyParts.length > 7) {
                        recentBodyParts.shift();
                    }
                }

                if (currentDay >= 28) {
                    showCompletion();
                } else {
                    showDay(currentDay + 1);
                }
            }

            // í”„ë¡œê·¸ë¨ ì™„ë£Œ
            function showCompletion() {
                const container = document.getElementById(
                    "dayWorkoutContainer"
                );

                let expSummary =
                    '<h3>ë¶€ìœ„ë³„ ìµœì¢… ê²½í—˜ì¹˜</h3><div class="exp-bars">';
                for (let part in userData.bodyPartExp) {
                    const exp = userData.bodyPartExp[part];
                    expSummary += `
                    <div class="exp-bar">
                        <div class="exp-label">
                            <span>${part}</span>
                            <span>${exp}/100</span>
                        </div>
                        <div class="exp-progress">
                            <div class="exp-fill" style="width: ${exp}%"></div>
                        </div>
                    </div>
                `;
                }
                expSummary += "</div>";

                container.innerHTML = `
                <div class="completion-card">
                    <h2>ğŸ‰ 28ì¼ í”„ë¡œê·¸ë¨ ì™„ë£Œ!</h2>
                    <p>ì¶•í•˜í•©ë‹ˆë‹¤! í•œ ë‹¬ê°„ì˜ ì—¬ì •ì„ ì™„ì£¼í•˜ì…¨ìŠµë‹ˆë‹¤.</p>
                    <p>í”¼ë“œë°± ê¸°ë°˜ìœ¼ë¡œ ê²½í—˜ì¹˜ê°€ ì¡°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <div class="exp-changes-summary">
                        ${expSummary}
                    </div>
                </div>
            `;
            }

            // ì‚¬ìš©ì í”„ë¡œí•„ í‘œì‹œ
            function displayUserProfile() {
                const profileDiv = document.getElementById("userProfile");

                let html = "<h3>ğŸ“Š ì‚¬ìš©ì í”„ë¡œí•„ ë° ë¶€ìœ„ë³„ ê²½í—˜ì¹˜</h3>";
                html += '<div class="profile-grid">';
                html += `<div class="profile-item"><strong>ê²½í—˜ ë ˆë²¨</strong><span>${userData.experience}</span></div>`;
                html += `<div class="profile-item"><strong>ìš´ë™ ë¹ˆë„</strong><span>ì£¼ ${userData.frequency}íšŒ</span></div>`;
                html += `<div class="profile-item"><strong>ìš´ë™ í™˜ê²½</strong><span>${userData.environment}</span></div>`;
                html += `<div class="profile-item"><strong>ìš´ë™ ëª©í‘œ</strong><span>${userData.goal}</span></div>`;

                if (userData.body.height > 0 && userData.body.weight > 0) {
                    const bmi = (
                        userData.body.weight /
                        Math.pow(userData.body.height / 100, 2)
                    ).toFixed(1);
                    html += `<div class="profile-item"><strong>ì²´í˜•</strong><span>${userData.body.height}cm / ${userData.body.weight}kg</span></div>`;
                }

                if (
                    userData.focusAreas.length > 0 &&
                    !userData.focusAreas.includes("ì—†ìŒ")
                ) {
                    html += `<div class="profile-item"><strong>ì§‘ì¤‘ ë¶€ìœ„</strong><span>${userData.focusAreas.join(
                        ", "
                    )}</span></div>`;
                }

                html += "</div>";

                // ìµœê·¼ ìš´ë™ ë¶€ìœ„ íˆìŠ¤í† ë¦¬ í‘œì‹œ
                if (recentBodyParts.length > 0) {
                    html +=
                        '<div style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px;">';
                    html +=
                        '<strong style="color: #667eea;">ğŸ“ ìµœê·¼ ìš´ë™ ë¶€ìœ„ íˆìŠ¤í† ë¦¬</strong>';
                    html +=
                        '<div style="margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap;">';
                    recentBodyParts.forEach((part, idx) => {
                        html += `<span class="tag" style="background: #667eea; color: white;">Day ${
                            currentDay - recentBodyParts.length + idx + 1
                        }: ${part}</span>`;
                    });
                    html += "</div></div>";
                }

                html += '<div class="exp-bars" id="expBarsContainer"></div>';

                profileDiv.innerHTML = html;
                updateExpBars();
            }

            // ê²½í—˜ì¹˜ ë°” ì—…ë°ì´íŠ¸
            function updateExpBars() {
                const container = document.getElementById("expBarsContainer");
                if (!container) return;

                let html = "";
                for (let part in userData.bodyPartExp) {
                    const exp = userData.bodyPartExp[part];
                    const change = expChanges[part] || 0;
                    const changeText =
                        change > 0
                            ? `+${change}`
                            : change < 0
                            ? `${change}`
                            : "";
                    const changeClass =
                        change > 0 ? "positive" : change < 0 ? "negative" : "";

                    html += `
                    <div class="exp-bar">
                        <div class="exp-label">
                            <span>${part}</span>
                            <span>
                                ${exp}/100
                                ${
                                    changeText
                                        ? `<span class="exp-change ${changeClass}">${changeText}</span>`
                                        : ""
                                }
                            </span>
                        </div>
                        <div class="exp-progress">
                            <div class="exp-fill" id="exp-fill-${part}" style="width: ${exp}%"></div>
                        </div>
                    </div>
                `;
                }
                container.innerHTML = html;
            }

            // í”„ë¡œê·¸ë¨ ë¦¬ì…‹
            function resetProgram() {
                if (
                    !confirm(
                        "ì •ë§ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ì§„í–‰ ìƒí™©ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤."
                    )
                ) {
                    return;
                }

                document
                    .getElementById("resultsSection")
                    .classList.remove("active");
                document
                    .getElementById("surveySection")
                    .classList.add("active");

                // í¼ ë¦¬ì…‹
                document
                    .querySelectorAll('input[type="radio"]')
                    .forEach((input) => (input.checked = false));
                document
                    .querySelectorAll('input[type="checkbox"]')
                    .forEach((input) => (input.checked = false));
                document
                    .querySelectorAll('input[type="number"]')
                    .forEach((input) => (input.value = ""));

                // ë°ì´í„° ë¦¬ì…‹
                userData = {
                    experience: "",
                    lifts: { squat: 0, bench: 0, deadlift: 0 },
                    body: { height: 0, weight: 0 },
                    frequency: 0,
                    environment: "",
                    goal: "",
                    focusAreas: [],
                    bodyPartExp: {
                        ê°€ìŠ´: 50,
                        ë“±: 50,
                        ì–´ê¹¨: 50,
                        íŒ”: 50,
                        ë³µë¶€: 50,
                        í•˜ì²´: 50,
                        ì½”ì–´: 50,
                    },
                };
                currentDay = 1;
                currentWeek = 1;
                recentBodyParts = [];
                currentDayData = null;
                feedbackGiven = false;
                expChanges = {};
            }
        </script>
    </body>
</html>
